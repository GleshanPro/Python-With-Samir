ИПР Анки

Каждая команда в докере создаёт новый слой, пред readonly



docker-compose

restart: unless-stopped - пока вручную не остановим, будет подниматься

redis:
    порты прокидывать не нужно. внешний мир её не видит, апишка видит


api:
    build: ../folder-api/ - сборочный контекст
    ports: 
        - "8000:8000" - если не прокинуть порты, будет консервная банка
    Мы не хотим экспоузить наружу переменные окружения. (В гите и т.д.)
    Их обычно прячат
    Ещё делают env_example

    depends_on не ставит огр на то, в каком порядке запускаются сервисы
    build не будет запускаться до сборки контейнеров в нём

    depends_on:
        - redis: healthy # health чек - позволяет определить запуск целого сервиса (не только билда контейнера)

    command: ... # запускает команду внутри контейнера


команды docker
ps - список поднятых на текущий момент контейнеров
image ls - список доступных образов
ps -h  здоровье
compose ps - поднятые в докер компоузе рядом с контекстом докер компоуза
compose -f docker-compose.yaml ps (аналогично)
exec [container] [command] - например, можем провалиться в консоль контейнера
